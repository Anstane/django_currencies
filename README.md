# Приложение для получения курса валют

### Стек:

Python 3.11 | Djnago 5.0 

### Функционал:

Django-приложение, реализующее функционал получения курса валют и отображения текущего курса по запросу.

Приоржение было упаковано в Docker контейнер и сделана безопасная management-команда с атомарными операциями для записи данных валют.
Команда для ручного запуска: `python manage.py update_rate` / В докере: `docker exec -it django_currencies python manage.py update_rate`

Была также добавлена библиотека django-cron для периодеческого обновления данных о валютах по средствам вызова management-команды.
Команда в settings.py отвечающая за cron: `('* * * * *', 'django.core.management.call_command', ['update_rate'], {}, '>>' + os.path.join(BASE_DIR, 'cron/django_cron.log' + ' 2>&1 '))`

В данный момент обновление происходит каждую минуту, если мы хотим изменить частоту, нам нужно исправить `'* * * * *'` в settings.py.

При запуске приложения в docker`е автоматически создаётся админка, данные для входа:

```
  login: admin
  password: admin
```

### Релизованные эндпоинты:

```
  - /rate/?charcode=AUD&date=2024-01-01 возвращает данные о валюте в JSON-формате.
  - /rate/currencies/ получает все курсы валют за текущую дату
```

Где charcode - наименования валюты, date - дата за которую мы хотим получить данные.

## Установка

#### Клонируем репозиторй
```
  git@github.com:Anstane/django_currencies.git
```

#### Переходим в папку с приложением
```
  cd django_currencies
```

#### Запускаем docker compose
```
  docker compose up
```

#### Пользуемся приложением.

## Планы на доработку

- Можно переделать cron на Celery скрипт
- Сделать шаблоны для отображения валют более привлекательными


## Автор

[Михаил Московкин](https://github.com/Anstane)

